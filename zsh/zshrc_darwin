fpath=(/usr/local/share/zsh-completions /usr/local/share/zsh/functions $fpath)

export NVM_NODEJS_ORG_MIRROR=https://npm.taobao.org/mirrors/node
export SDKROOT=macosx

PATH="/usr/local/opt/libarchive/bin:$PATH"
export PATH

# source ~/.zshrc_work
source ~/.zshrc_common
_source /usr/local/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
_source ~/.opam/opam-init/init.zsh

## alias
alias rm="grm -Irv"
alias ls="gls --color=auto --group-directories-first -vF"
alias mvim="mvim -v"

alias dm="docker-machine --native-ssh"
alias danger_chrome="open -a 'Google Chrome Canary' --args --disable-web-security --user-data-dir --allow-file-access-from-files"
alias mosh="mosh --predict=experimental"
alias breww="brew update && brew upgrade && brew cleanup -s && brew prune"
obuild() {
    for i in "$@"; do
        ocamlbuild \
            -tag 'color(always)' \
            -tag safe_string \
            -tag strict_sequence \
            -tag strict_formats \
            -tag short_paths \
            -tag keep_locs \
            -use-ocamlfind -package str \
            ${i%.ml}.byte
    done
}
datauri() {echo "data:image/${1##*.};base64,$(openssl base64 -in $1 | tr -d '\n')"}

# forward f port remote-port remote-host
# forward c port remote-port remote-host
forward() {
    case "$1" in
        "f") ssh -v -O forward -R $3:localhost:$2 $4 ;;
        "c") ssh -v -O cancel -R $3:localhost:$2 $4 ;;
    esac
}
